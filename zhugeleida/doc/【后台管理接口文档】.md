
[TOC]
#### code 说明：

```python
200 正常

300 角色名已存在
301 数据类型验证失败
302 对应ID不存在
303 form 验证错误
304 含有子级数据,请先删除或转移子级数据
305 不允许删除自己
306 账户未启用

401 账号密码错误
402 请求方式异常 例如应该使用 POST 请求的使用的是 GET 请求
403 无任务
404 非法请求
```

####  1.1、用户状态启用和未启用：
请求方式：POST（HTTP）
请求示例：
>http://127.0.0.1:8000/zhugeleida/admin/user/update_status/3?rand_str=94e83293256bed726191ba207c53e342&timestamp=1528209075753&user_id=1

GET 请求发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token),
    'timestamp': timestamp,
    'user_id': 1,
}
``` 


URL 传参说明：
/zhugeleida/admin/user/update_status/{{ user_id }}
``` python
参数            必填          说明
path            是           {{ user_id}} 代表要修改的用户的ID
```


POST 数据格式

``` python
{
 'status' : 1  #   (1, "启用"),(2, "未启用") 
}
``` 

POST参数说明：

``` python
参数            必填          说明
path            是           {{ user_id}} 代表要修改的用户的ID
status          是            (1, "启用"),(2, "未启用") 
```


####  1.2、统计-名片状态+账号状态：
请求方式：GET（HTTP）
请求示例：
>http://api.zhugeleidai.com/zhugeleida/admin/home_page?rand_str=01da6154c14af6fa6ff78b65d6bf162b&timestamp=1531401411309&user_id=1

GET 发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token), # 公共部分
    'timestamp': timestamp, # 公共部分
    'user_id': 1,  # 公共部分
    
    
}
``` 


返回数据:

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":{
            "company_name":"北京合众多屏科技发展有限公司",
            "username":"张聪",
            "mingpian_num":5,
            "user_count":13,
            "expired_time":"2019-06-20",
            "open_up_date":"2018-06-20",
            "available_days":342,
            "used_days":22,
            "customer_num":8
        }
    }
}
``` 





####  1.3、统计-数据概览：
请求方式：GET（HTTP）
请求示例：
>http://api.zhugeleidai.com/zhugeleida/admin/home_page/acount_data?rand_str=09097481b9c3b0dc769adf6698d9eee7&timestamp=1531400625411&user_id=1

GET 发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token), # 公共部分
    'timestamp': timestamp, # 公共部分
    'user_id': 1,  # 公共部分
    
    
}
``` 


返回数据:

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":{
            "count_data":{
                "customer_num":8,
                "follow_num":8,
                "browse_num":325,
                "forward_num":15,
                "saved_total_num":3,
                "praise_sum":211
            },
            "yesterday_data":{
                "customer_num":0,
                "follow_num":0,
                "browse_num":0,
                "forward_num":0,
                "saved_total_num":0,
                "praise_sum":0
            },
            "nearly_seven_days":{
                "customer_num":8,
                "follow_num":8,
                "browse_num":325,
                "forward_num":15,
                "saved_total_num":3,
                "praise_sum":211
            },
            "nearly_thirty_days":{
                "customer_num":8,
                "follow_num":8,
                "browse_num":325,
                "forward_num":15,
                "saved_total_num":3,
                "praise_sum":211
            }
        }
    }
}
``` 

####  1.4、统计-数据概览：
请求方式：POST（HTTP）
请求示例：
>http://api.zhugeleidai.com/zhugeleida/admin/home_page/line_info?rand_str=020fe575535f25363899d3d29d498adc&timestamp=1531401548295&user_id=1

GET 发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token), # 公共部分
    'timestamp': timestamp, # 公共部分
    'user_id': 1,  # 公共部分
    
    
}
``` 


POST 发送数据部分：

``` python
{
    'days': 7 | 15        # 按7天 或者 按照15天搜索
    'index_type': 1 | 2 | 3 | 4 | 5 | 6 , # 1 客户总数 2 跟进总数 3 浏览总数 4被转发总数 5被保存总数  6被点赞总数
 
    
    
}
``` 

返回数据:

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "statics_date":"2018-07-05",
                "value":1
            },
            {
                "statics_date":"2018-07-06",
                "value":0
            },
            {
                "statics_date":"2018-07-07",
                "value":0
            },
            {
                "statics_date":"2018-07-08",
                "value":0
            },
            {
                "statics_date":"2018-07-09",
                "value":0
            },
            {
                "statics_date":"2018-07-10",
                "value":3
            },
            {
                "statics_date":"2018-07-11",
                "value":0
            }
        ]
    }
}
``` 

####  2.1、展示产品(公司产品+个人产品)：
描述：基于管理员登录，展示出所有企业产品和所有个人产品，可以搜索

请求方式：GET（HTTP）
请求示例：
>http://api.zhugeleidai.com/zhugeleida/admin/product/product_list/?rand_str=9e25582beff9b45d0341f30e1c727b43&timestamp=1531403183587&user_id=1&product_type=1

GET 发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token), # 公共部分
    'timestamp': timestamp,  # 公共部分
    'user_id': 1,            # 公共部分
    
    'product_type' : 1 | 2   # 1、代表官网产品展示(默认展示上架的)  2、代表个人产品(默认展示上架的)
    'company_id': ID           # 搜索：公司的ID
    'product_name' : '门票',   # 搜索：关键字
    'status': 1 | 2            # 搜索 (1,'已上架') (2,'已下架')
}
``` 

POST参数说明：

``` python
参数            必填          说明
product_type    是          1、代表官网产品展示(默认展示上架的)  2、代表个人产品(默认展示上架的)
status          否          # 搜索 (1,'已上架') (2,'已下架')
product_name    否          # 搜索：关键字
company_id      否          # 搜索：公司的ID
```

返回数据:

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "product_id":10,
                "content":{
                    "cover_data":[
                        {
                            "type":"picture_url",
                            "data":[
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_1.png",
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_2.png"
                            ]
                        }
                    ]
                },
                "name":"门票2",
                "price":"128",
                "publisher_date":"2018-07-21 11:24:03",
                "publisher":"张聪",
                "status":"已发布",
                "status_code":1
            },
            {
                "product_id":2,
                "content":{
                    "cover_data":[
                        {
                            "type":"picture_url",
                            "data":[
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_1.png",
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_2.png"
                            ]
                        }
                    ]
                },
                "name":"2018国际男篮对抗赛连云港 中国VS斯洛文尼亚",
                "price":"280-1280",
                "publisher_date":"2018-06-26 14:08:44",
                "publisher":"张炬",
                "status":"推荐",
                "status_code":3
            }
        ],
        "data_count":2
    }
}
``` 

####  2.2、【后台管理 - 产品里-展示产品(公司产品+个人产品)】：
描述：基于普通用户登录使用
请求方式：GET（HTTP）
请求示例：
>http://api.zhugeleidai.com/zhugeleida/admin/product/product_list/?rand_str=9e25582beff9b45d0341f30e1c727b43&timestamp=1531403183587&user_id=1&product_type=1

GET 发送数据部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token), # 公共部分
    'timestamp': timestamp,  # 公共部分
    'user_id': 1,            # 公共部分
    
    'product_type' : 1 | 2   # 1、代表官网产品展示(默认展示上架的)  2、代表个人产品(默认展示上架的)
    'product_name' : '门票',   # 搜索：关键字
    'status': 1 | 2            # 搜索 (1,'已上架') (2,'已下架')
}
``` 

POST参数说明：

``` python
参数            必填          说明
product_type    是          1、代表官网产品展示(默认展示上架的)  2、代表个人产品(默认展示上架的)
status          否          # 搜索 (1,'已上架') (2,'已下架')
product_name    否          # 搜索：关键字

```

返回数据:

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "product_id":10,
                "content":{
                    "cover_data":[
                        {
                            "type":"picture_url",
                            "data":[
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_1.png",
                                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_2.png"
                            ]
                        }
                    ]
                },
                "name":"门票2",
                "price":"128",
                "publisher_date":"2018-07-21 11:24:03",
                "publisher":"张聪",
                "status":"已发布",
                "status_code":1
            }
        ],
        "data_count":1
    }
}
``` 



####    【2.3、后台管理 - 产品里-增加产品】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/admin/product/add/0?rand_str=4ccdd564881d7aa3e8b1532859020bee&timestamp=1530152114630&user_id=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信用户ID    【必传公共参数 】   
    }
   
```


GET参数必要说明:

``` python
参数：       必填       参数说明
uid         是         企业微信-所属用户ID    
product_id  是         产品的ID
product_type 是       1 代表公司产品 2 代表 个人产品
```

POST 请求参数

``` python
    {
        'name': '门票',     #产品名称
        'price': 228,      #产品价格
        'reason': '一起度过美好时光!!',    #推荐理由  
        'content' :  
 {
    "cover_data":[
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_1.png",
                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_2.png"
            ]
        }
    ],
    "article_data":[
        {
            "type":"title",
            "data":[
                "xx我是标题1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_1.png"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_2.png"
            ]
        },
        {
            "type":"title",
            "data":[
                "我是标题2"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_3.png"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容3"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_4.png"
              ]
        }
       ]
   }
		
}
	
   
```

POST参数说明：

``` python
参数：            必填       参数说明
name              是         #产品名称
price             是         #产品价格
reason            是         #推荐理由  
content           否         #产品封面+文章的内容

```

返回结果 ：

``` python
{
    "code":200,
    "msg":"添加成功",
    "data":{

    }
}
```



####    【2.4、后台管理 - 产品里-修改公司和个人产品】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/admin/product/update/23?rand_str=60291413673753dfcda074cf87e3a091&timestamp=1530154842788&user_id=1


GET 请求数据：

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                                     #企业微信用户ID    【必传公共参数 】   
    }
   
```


GET参数说明:

``` python
参数：         必填       参数说明
user_id       是         企业微信-所属用户ID    
product_id    是         产品的ID
product_type      是         1 代表公司产品 2 代表 个人产品

```
URL 传参说明:

``` python
参数：                                            必填       参数说明
/zhugeleida/admin/product/update/{{ o_id}}  是        #代表要修改的产品ID 

```

POST 请求参数

``` python
      {
        'name': '门票',     #产品名称
        'price': 228,      #产品价格
        'reason': '一起度过美好时光!!',    #推荐理由  
        'content' :  
 {
    "cover_data":[
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_1.png",
                "statics/zhugeleida/imgs/xiaochengxu/website/Website_scroll_2.png"
            ]
        }
    ],
    "article_data":[
        {
            "type":"title",
            "data":[
                "xx我是标题1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_1.png"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_2.png"
            ]
        },
        {
            "type":"title",
            "data":[
                "我是标题2"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容1"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_3.png"
            ]
        },
        {
            "type":"content",
            "data":[
                "我是内容3"
            ]
        },
        {
            "type":"picture_url",
            "data":[
                "statics/zhugeleida/imgs/xiaochengxu/website/Content_4.png"
              ]
        }
       ]
   }
		
}
   
```

POST参数说明：

``` python
参数：            必填       参数说明
name              是         产品名称
price             是         产品价格
reason            是         推荐理由  

content           是         产品封面和文章的内容

```

返回结果 ：

``` python
{
    "code":200,
    "msg":"添加成功",
    "data":{

    }
}
```

####    2.4、【后台管理 - 产品里-删除公司产品】

描述：role_id = 1:  # 管理员 ，能删除官网的产品和个人的所有的产品。
role_id = 2:  # 普通用户，只能删除自己的公司的个人产品。

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/admin/product/delete/3?rand_str=4ccdd564881d7aa3e8b1532859020bee&timestamp=1530152114630&user_id=1



GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信的 用户ID      【必传公共参数 】   
    }
   
```


GET参数必要说明:

``` python
参数：       必填       参数说明
user_id      是        企业微信的用户ID  
```

URL 传参说明:

``` python
参数：                                           必填       参数说明
/zhugeleida/admin/product/delete/{o_id}    是      代表要修改为 删除的产品ID   

```


返回结果 ：

``` python
{
    "code":200,
    "msg":"删除成功",
    "data":{

    }
}

```

####    【后台管理 - 产品里-增加单个产品里的图片（封面图片或产品介绍图片）】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/qiyeweixin/product/add_picture/0?rand_str=5b4243dea5d3e44cc594af7a11b9999b&timestamp=1530156149132&user_id=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信 用户ID        必传公共参数   
    }
   
```

GET参数必要说明:

``` python
参数：       必填       参数说明
img_name     是         文件名
timestamp    是         获取文件唯一标识【即时间戳】
chunk        是         获取该分片在所有分片中的序号
```

等分片文件全部传输完毕后，在调用一个接口：
请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/qiyeweixin/product/upload_complete/0?rand_str=0d426ac0c58a28be0af3d726bcfa5234&timestamp=1529651748322&user_id=1

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信的用户ID        必传公共参数   
        
    }
   
```

GET 参数-说明：
``` python
参数：       必填       参数说明
img_name     是         文件名
timestamp    是         获取文件唯一标识【即时间戳】
chunk_num    是         一共多少份
picture_type 是        图片的类型  (1, '产品封面的图片'), (2, '产品介绍的图片')
```

返回结果 ：

``` python
{
    "code":200,
    "msg":"添加图片成功",
    "data":{
        "ret_data":{
            "picture_id":20,   #新添加的图片ID  
            "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180628140645880613.jpg" ##新添加的图片URL   
        }
    }
}
```




####    【2.5、后台管理 - 产品里 - 上架 | 下架产品】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/qiyeweixin/product/change_status/10?rand_str=aee483a62a61b0670fb6f2e47b41a4ef&timestamp=1530168762605&user_id=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信的 用户ID      【必传公共参数 】   
    
    }
   
```

POST请求参数

``` python
    {
    'status' : 1 |  2 ， # (1,'已发布'), (2,'已下架') 修改产品状态
    
    }
   
```


GET参数必要说明:

``` python
参数：       必填       参数说明
user_id      是        企业微信的用户ID  
```

URL 传参说明:

``` python
参数：                                                 必填       参数说明
/zhugeleida/admin/product/change_status/{o_id}    是        代表要修改状态的产品ID   

```


返回结果 ：

``` python
{
    "code":200,
    "msg":"修改下架状态成功",
    "data":{
        "product_id":10,
        "status":"已下架",
        "status_code":2
    }
}
```







####   xxx  【后台管理 - 产品里-增加公司产品】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/admin/product/add/0?rand_str=4ccdd564881d7aa3e8b1532859020bee&timestamp=1530152114630&user_id=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信用户ID    【必传公共参数 】   
    }
   
```


GET参数必要说明:

``` python
参数：       必填       参数说明
uid         是         企业微信-所属用户ID    
product_id  是         产品的ID

```

POST 请求参数

``` python
    {
        'name': '门票',     #产品名称
        'price': 228,      #产品价格
        'reason': '一起度过美好时光!!',    #推荐理由  
        'cover_picture_data':  [
                     {'picture_url': statics/zhugeleida/imgs/qiyeweixin/product/20180628140645880613.jpg, 'order': 1},     #产品封面URL和排序的序号
                     {'picture_url': statics/zhugeleida/imgs/qiyeweixin/product/20180628134745880613.jpg, 'order': 2},        #产品封面URL和排序的序号
        
        
        
        ],        # 封面图片的ID
        'article_data' : [
                        
                        {'picture_url': statics/zhugeleida/imgs/qiyeweixin/product/20180628140645880613.jpg, 'order': 1},     #产品图片URL和排序的序号
                        {'picture_url': statics/zhugeleida/imgs/qiyeweixin/product/20180628134745880613.jpg, 'order': 2},        #产品URL和排序的序号
                    ]
    }
   
```

POST参数说明：

``` python
参数：            必填       参数说明
name              是         #产品名称
price             是         #产品价格
reason            是         #推荐理由  
cover_picture_data  是         # 封面图片的URL列表

article_data        是         # 产品图片URL列表
picture_url        是          图片的URL
order             是         # 文章的标题、内容、产品图片的排序的ID序号
```

返回结果 ：

``` python
{
    "code":200,
    "msg":"添加成功",
    "data":{

    }
}
```




####   3.1、【后台管理 - 通用的-上传图片 】

描述： 通用接口用于上传 【封面图片】和 【产品详情图片】

请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/public/img_upload?rand_str=5b4243dea5d3e44cc594af7a11b9999b&timestamp=1530156149132&user_id=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信 用户ID        必传公共参数   
    }
   
```

POST 参数必要说明:

``` python
参数：       必填       参数说明
img_name     是         文件名
img_data     是          文件内容
chunk        是         获取该分片在所有分片中的序号
timestamp    是         获取文件唯一标识【即时间戳】
img_source   是         cover_picture 代表封面上传的照片  product_picture 代表产品介绍图片上传

```

POST 请求参数:
``` python
    {
        'img_name': xxxx.jpg, 
        'img_data' : 'dfadcvtyhmnsfwqopnvlaijkytuangl....'
        'chunk' : 1 ,  # 获取该分片在所有分片中的序号
        'timestamp': timestamp,          #  获取文件唯一标识【即时间戳】
        'img_source' : 'cover_picture' |  'product_picture' 
    }
   
```


等分片文件全部传输完毕后，在调用一个接口：
请求方式：POST（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/public/img_merge?rand_str=0d426ac0c58a28be0af3d726bcfa5234&timestamp=1529651748322&user_id=1

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,                               #必传公共参数  
        'user_id': 1,                    #企业微信的用户ID        必传公共参数   
        
    }
   
```

POST 参数-说明：
``` python
参数：        必填       参数说明
img_name      是         文件名
timestamp     是         获取文件唯一标识【即时间戳】
chunk_num     是         一共多少份

cover_picture 是          cover_picture 代表封面上传的照片  product_picture 代表产品介绍图片上传

```

POST 请求参数:
``` python
    {
        'img_name': xxxx.jpg, 
        'timestamp': timestamp,          #  获取文件唯一标识【即时间戳】
        'chunk_num' : 5,                 # 一共多少个切片    
        'img_source' : 'cover_picture' |  'product_picture' 
    }
    
   
```


返回结果 ：

``` python
{
    "code":200,
    "msg":"添加图片成功",
    "data":{
        "ret_data":{
            "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180628140645880613.jpg" ##新添加的图片URL   
        }
    }
}
```









