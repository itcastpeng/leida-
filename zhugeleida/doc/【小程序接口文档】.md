[TOC]

####  【code 说明】：
```python
200 正常

300 角色名已存在
301 数据类型验证失败
302 对应ID不存在
303 form 验证错误
304 含有子级数据,请先删除或转移子级数据
305 不允许删除自己
306 账户未启用

401 账号密码错误
402 请求方式异常 例如应该使用 POST 请求的使用的是 GET 请求
403 无任务
404 非法请求

```





#### 1.1、【小程序 - 登录认证】

请求方式：GET（HTTP）
请求示例：

>http://127.0.0.1:8000/zhugeleida/xiaochengxu/login?code='pm4Mp2zwTb0GOxcJ3hhYETNaWhPWF5lDwDZ_mHWHOqQ'&user_type=2&source=1 #

GET 请求参数部分：

``` python
{
    'code': 'pm4Mp2zwTb0GOxcJ3hhYETNaWhPWF5lDwDZ_mHWHOqQ', 
    'user_type': 2,
    'source' : 1,
	'uid' : 1,   #代表
}
```

GET请求参数部分：

``` python
参数 			必填			  说明
code		  是				微信小程序访问带的code
user_type 	  是 			客户访问类型 1,微信公众号 2,微信小程序
source 		  是				客户的来源 1,扫码 2,转发
uid           是              所属企业微信用户ID
```


####  1.2、【企业微信 - 分页获取-所有的聊天信息记录】

请求方式：GET（HTTP）
请求示例：

>http://127.0.0.1:8000//zhugeleida/qiyeweixin/chat?rand_str=53444e4ca12d03176c9b6109c0c557b0&timestamp=1528871213546&user_id=1&customer_id=1

GET 请求参数部分：

``` python
{
    'rand_str': account.str_encrypt(timestamp + token),
    'timestamp': timestamp,
    'user_id': 2,   
    'customer_id': 1,
	'current_page'：1,            
    'length'     :   20           
}

```

GET参数说明:

``` python
参数           必填          说明
user_id        是           用户的ID
customer_id    是           客户的ID
current_page   否           当前页数
length         否           每页长度
current_page   否           当前页数
length'        否           每页长度(每页长度为20页)
```

返回结果：

```  python
{
    "code":200,
    "msg":"分页获取聊天消息成功",
    "data":[
        {
            "customer_id":1,
            "user_id":1,
            "src":"http://api.zhugeyingxiao.com/statics/imgs/setAvator.jpg",
            "name":"张炬[客户2]",
            "dateTime":"2018-06-13T11:49:57.000",
            "msg":"近年来，中俄两国领导人每年都会会晤多次，今年也不例外。报道称，普京在参加完上合峰会后，还会陆续出席金砖四国峰会和亚太经合组织峰会(APEC) 峰会。",
            "send_type":2
        },
        {
            "customer_id":1,
            "user_id":1,
            "src":"http://api.zhugeyingxiao.com/statics/imgs/setAvator.jpg",
            "name":"张炬[客户2]",
            "dateTime":"2018-06-13T11:44:32.456",
            "msg":"据中国日报网报道，在记者会上，特朗普再次对朝鲜领导人金正恩表示感谢",
            "send_type":1
        }
    ]
}
``` 



####  【企业微信 - 实时聊天-发送消息接口】

请求方式：POST（HTTP）

请求示例

>http://127.0.0.1:8000/zhugeleida/qiyeweixin/chat/send_msg/0?rand_str=7931b9ab560500e52492fbe92e1f3d6c&timestamp=1528182912675&user_id=1

 GET 请求参数部分：
```  python
{
    'rand_str': account.str_encrypt(timestamp + token),
    'timestamp': timestamp,
    'user_id': 2,
}
``` 

 
POST 请求参数部分：
```  python
参数             必填        说明
customer_id      是          客户ID
user_id          是          用户ID
msg              是          消息
send_type        发送        发送类型，1代表 用户发送给客户 ,  2代表 客户发送给用户。
``` 

返回结果：
```  python
{"code": 200, "msg": "send msg successful", "data": {}}
``` 
 


####   【企业微信 - 实时聊天-获取最新的聊天信息】

请求方式：GET（HTTP）
请求示例:

>http://127.0.0.1:8000/zhugeleida/qiyeweixin/chat/getmsg/0?rand_str=51d703e387eb75da00f32520d7964d24&timestamp=1528872527395&user_id=1&customer_id=2
 
 
GET 请求参数部分：

```  python
{
    'rand_str': account.str_encrypt(timestamp + token),
    'timestamp': timestamp,
    'user_id': 2,
    'customer_id': 1
}

``` 

GET请求参数部分：

```  python
参数            必填         说明
customer_id     是           客户ID
user_id         是           用户ID
``` 

 返回结果：

```  python
{
    "code":200,
    "msg":"实时获取-最新聊天记录成功",
    "data":[
        {
            "customer_id":2,
            "user_id":1,
            "src":"http://api.zhugeyingxiao.com/statics/imgs/setAvator.jpg",
            "name":"张聪[客户1]",
            "dateTime":"2018-06-13T11:48:25.456",
            "send_type":2,
            "msg":"，俄总统普京将在上海合作组织成员国元首理事会青岛峰会（上合峰会）前夕对中国进行国事访问。这一消息已经得到了克里姆林宫的证实。"
        },
        {
            "customer_id":2,
            "user_id":1,
            "src":"http://api.zhugeyingxiao.com/statics/imgs/setAvator.jpg",
            "name":"张聪[客户1]",
            "dateTime":"2018-06-13T11:45:40.456",
            "send_type":1,
            "msg":"武汉大四学生坠楼的最新相关信息"
        }
    ]
}
``` 



####   【小程序- 显示单个用户的信息 并记录【访问名片】日志信息】

请求方式：GET（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian?rand_str=cae406b10a53dac573369b0eb5200ff0&timestamp=1529499334685&user_id=1&uid=2


GET 请求参数【公共参数】

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,
        'uid' :  2
       
      
    }
```

GET参数说明:

``` python
参数：      必填      参数说明
uid          是       所属用户的ID
user_id      是       小程序客户端的客户ID     

```

返回结果：

``` python
    {
        "code":200,
        "msg":"查询成功",
        "data":{
            "ret_data":[
                {
                    "id":2,
                    "username":"zhangju",            #用户名
                    "avatar":"statics/imgs/setAvator.jpg",  #头像
                    "company":"合众康桥",            #公司名称
                    "address":"1",                   #公司地址
                    "position":"技术经理",           #职位
                    "email":"",                      #邮箱
                    "wechat":"",                     #微信号 
                    "mingpian_phone":"18511123918",  # 名片上显示的手机号
                    "create_date":"2018-06-08T22:03:23.772",
                    "popularity_num":12,                 # 产看多少次
                    "praise_num":1,                      # 点赞多少次名片 【靠谱数量】
                    "forward_num":2                      # 转发多少次
                    "is_praise":  false,             # 是否点赞了名片。【靠谱与否】
                    "sign":     '我是你爸爸'            # 签名
                    "is_sign":false,                    # 是否点赞了签名
                    'sign_num' : 20,                     # 点赞个数
                    "photo":[
                             {'id':1,'photo_url': xxxxx},
                        [
                            4,
                            "statics/zhugeleida/imgs/xiaochengxu/qr_code/4_uemthqpcdn_photo.jpg"
                        ],
                        [
                            5,
                            "statics/zhugeleida/imgs/xiaochengxu/qr_code/5_uemthqpcdn_photo.jpg"
                        ]
                    ],
                }
            ],
            "data_count":1
        }
    }
```

####    【小程序 - 显示所有的企业微信用户】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/all?rand_str=e77523b1c848768f040deb530b04bd57&timestamp=1529540109759&user_id=2

GET 请求参数
``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,
    }
```

GET参数必要说明:

``` python
参数：      必填      参数说明
user_id      是       小程序客户端的客户ID     

```
返回结果：

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "id":2,
                "username":"zhangju",
                "source":"扫码",
                "avatar":"statics/imgs/setAvator.jpg",
                "company":"合众康桥",
                "position":"技术经理",
                "email":"",
                "mingpian_phone":"18511123918",
                "create_date":"2018-06-08T22:03:23.772"
            },
            {
                "id":1,
                "username":"zhangcong",
                "source":"扫码",
                "avatar":"statics/imgs/setAvator.jpg",
                "company":"合众康桥",
                "position":"技术经理",
                "email":"",
                "mingpian_phone":"18511125018",
                "create_date":"2018-06-07T19:47:43"
            }
        ],
        "data_count":2
    }
}

```

####    【小程序 - 名片里-记录拨打手机的动作】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/calling?rand_str=b1c3f902e8d15a5e617328d35abc630a&timestamp=1529542925528&user_id=2&uid=2&action=10

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,
        'uid' : 2,
    }
```


GET参数必要说明:

``` python
参数：      必填      参数说明
user_id      是       小程序客户端的客户ID     
uid          是       所属用户ID

```

返回结果：
``` python
    {
        "code":200,
        "msg":"记录日志成功",
        "data":{

        }
    }
```


####    【小程序 - 名片里-记录点赞或者取消点赞】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/praise?rand_str=b587cab28de63a05cdec5e789e6f2b54&timestamp=1529543973411&user_id=2&uid=2

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,
        'uid' : 2,   
    }
```


GET参数必要说明:

``` python
参数：      必填      参数说明
user_id      是       小程序客户端的客户ID     
uid          是       所属用户ID


```

返回结果 ：

``` python
    {
        "code":200,
        "msg":"记录日志成功",
        "data":{

        }
    }
```

####    【小程序 - 名片里-记录转发动作】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/forward?rand_str=2db7d341300b1ab4aec9238ed8618d53&timestamp=1529544299602&user_id=2&uid=2&action=6

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,
        'uid' : 2,
       
    }
```


GET参数必要说明:

``` python
参数：      必填      参数说明
user_id      是       小程序客户端的客户ID     
uid          是       所属用户ID


```

返回结果 ：

``` python
    {
        "code":200,
        "msg":"记录日志成功",
        "data":{

        }
    }
```



####    【小程序 - 名片里-记录点赞签名】


请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/up_sign?rand_str=d43fe0f93858169921dc6906e375ae81&timestamp=1529656667083&user_id=1&uid=2

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),
        'timestamp': timestamp,
        'user_id': 1,                    #小程序的用户ID
        'uid': 2,                        #所属用户的ID   
    }
   
```


GET参数必要说明:

``` python
参数：      必填       参数说明
user_id      是       企业微信-用户ID     

```


返回结果 ：

``` python
    {
        "code":200,
        "msg":"记录日志成功",
        "data":{
            "ret_data":{
                "sign_num":11,   # 签名总个数
                "is_sign":true   # 签名是否点赞了。  true代表点赞了。false 代表没有。
            }
        }
    }
```

####    【小程序 - 名片里-生成海报 \ 并记录访问动作】


请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/mingpian/create_poster?rand_str=520ea0b847a0c939a9115e49c88ba4fd&timestamp=1530102750848&user_id=1&uid=1

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token), #公共必填参数
        'timestamp': timestamp,                             #公共必填参数
        'user_id': 1,                    #小程序的用户ID     公共必填参数
        'uid': 1,                        #所属用户的ID   
    }
   
```


GET参数必要说明:

``` python
参数：      必填       参数说明
user_id     是         小程序用户ID
uid         是         企业微信-所属用户ID      

```


返回结果 ：

``` python
   {
    "code":200,
    "msg":"请求成功",
    "data":[
        {
            "user_id":1,
            "user_avatar":"statics/imgs/setAvator.jpg",
            "username":"zhangcong",
            "position":"技术经理",
            "mingpian_phone":"15931788975",
            "company":"合众康桥",
            "qr_code_url":"tatics\zhugeleida/2_qrcode.jpg"
        }
    ]
}
```





####    【小程序 - 产品-查看单个产品】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/product/product_single/?rand_str=451f9ba7212d95bdb88af1661f849e2e&timestamp=1530105827161&user_id=1&product_id=22&uid=1

GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,          #必传公共参数  
        'user_id': 1,                    #小程序的用户ID    【必传公共参数 】
        'uid': 1,                        #所属用户的ID       
		'product_id': 22,                # 产品的ID  
    }
   
```


GET参数必要说明:

``` python
参数：      必填       参数说明
user_id     是         小程序用户ID
uid         是         企业微信-所属用户ID     
product_id  是         产品的ID

```


返回结果 ：

``` python
  {
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "id":22,
                "publisher_date":"2018-06-26T14:08:44.480",
                "cover_picture":[
                    {
                        "id":13,
                        "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180624204935905354.jpg"
                    },
                    {
                        "id":15,
                        "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180624205200315103.png"
                    }
                ],
                "name":"门票-赵雷",
                "price":"129",
                "user_avatar":"statics/imgs/setAvator.jpg",
                "reason":"美好时光-工体不见不散",
                "article_data":[
                    {
                        "id":21,
                        "order":1,
                        "content":null,
                        "title":"我是标题1"
                    },
                    {
                        "id":16,
                        "order":2,
                        "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180624204935905354.jpg"
                    },
                    {
                        "id":22,
                        "order":3,
                        "content":"我是内容1",
                        "title":null
                    },
                    {
                        "id":24,
                        "order":4,
                        "content":"",
                        "title":"我是标题3"
                    },
                    {
                        "id":14,
                        "order":5,
                        "picture_url":"statics/zhugeleida/imgs/qiyeweixin/product/20180624205147182315.jpg"
                    },
                    {
                        "id":23,
                        "order":6,
                        "content":"我是内容2",
                        "title":""
                    }
                ],
                "create_date":"2018-06-26",
                "status":"已发布",
                "status_code":1
            }
        ],
        "data_count":1
    }
}
```




####    【小程序 - 产品-查看所有产品】

请求方式：GET（HTTP）
访问示例:
>http://127.0.0.1:8000/zhugeleida/xiaochengxu/product/product_list/?rand_str=a4bec7b659d72dbc91ba85ed4b6f7bb2&timestamp=1530106362400&user_id=1&uid=1

GET 请求参数：

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,         					 #必传公共参数  
        'user_id': 1,                    #小程序的用户ID      必传公共参数
        'uid': 1,                        #所属用户的ID       
    }
   
```


GET参数必要说明:

``` python
参数：      必填       参数说明
user_id     是         小程序用户ID
uid         是         企业微信-所属用户ID     

```


返回结果 ：

``` python
{
    "code":200,
    "msg":"查询成功",
    "data":{
        "ret_data":[
            {
                "id":22,
                "name":"门票-赵雷",
                "price":"129",
                "user_avatar":"statics/imgs/setAvator.jpg",
                "reason":"美好时光-工体不见不散",
                "publisher_date":"2018-06-26T14:08:44.480",
                "cover_picture":"statics/zhugeleida/imgs/qiyeweixin/product/20180624204935905354.jpg",
                "create_date":"2018-06-26",
                "status":"已发布",
                "status_code":1
            },
            {
                "id":11,
                "name":"门票-薛之谦",
                "price":"2888",
                "user_avatar":"statics/imgs/setAvator.jpg",
                "reason":"摩天大楼-刚刚好",
                "publisher_date":"2018-06-25T14:09:21.408",
                "cover_picture":"C:\Users\EDZ\PycharmProjects\zhuge\zhugeApi\statics\zhugeleida\imgs\qiyeweixin\product/20180624195253.pdf",
                "create_date":"2018-06-25",
                "status":"已下架",
                "status_code":2
            },
            {
                "id":10,
                "name":"门票-李荣浩",
                "price":"2888",
                "user_avatar":"statics/imgs/setAvator.jpg",
                "reason":"有理想-不将就",
                "publisher_date":"2018-06-25T14:09:21.408",
                "cover_picture":"statics/zhugeleida/imgs/qiyeweixin/product/20180624203951048407.xlsx",
                "create_date":"2018-06-25",
                "status":"推荐",
                "status_code":3
            }
        ],
        "data_count":3
    }
}
```


####    【小程序 - 产品里-记录转发产品动作】

请求方式：GET（HTTP）
访问示例:

>http://127.0.0.1:8000/zhugeleida/xiaochengxu/product/forward_product/?rand_str=8e5f81687585a39ba6fcd45c6aaeeb1f&timestamp=1530149997888&user_id=1&product_id=22&uid=1


GET 请求参数

``` python
    {
        'rand_str': account.str_encrypt(timestamp + token),  #必传公共参数 
        'timestamp': timestamp,          					 #必传公共参数  
        'user_id': 1,                   #小程序用户ID      【必传公共参数 】   
		'uid': 1,                       #企业微信用户ID    
		'product_id': 22,                # 产品的ID  
    }
   
```


GET参数必要说明:

``` python
参数：       必填       参数说明
uid         是         企业微信-所属用户ID    
product_id  是         产品的ID

```


返回结果 ：

``` python
{
    "code":200,
    "msg":"记录转发产品成功",
    "data":{

    }
}
```

